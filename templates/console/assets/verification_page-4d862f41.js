import{r as s,w as b,U as v,j as e,z as y,a8 as C,a9 as E,aa as k,S as w,T as r,ae as S}from"./index-ed4e287f.js";import{u as R}from"./use-router-51db7fba.js";import{E as T,L}from"./ErrorMessage-1c50ec3f.js";import{C as z,B as u}from"./CircularProgress-b62e0508.js";function O(){const[h,f]=s.useState(""),[n,l]=s.useState(!1),[i,c]=s.useState(60),m=b(),a=R(),{email:t}=s.useContext(v);s.useEffect(()=>{(t===""||t===null)&&a.push("/login")},[t]),s.useEffect(()=>{let o;return n&&i>0?o=setTimeout(()=>c(i-1),1e3):i===0&&(l(!1),c(60)),()=>clearTimeout(o)},[n,i]);const p=async()=>{if(t===""||t===null){a.push("/login");return}l(!0);const d=await S(t,{method:"POST",headers:{"Content-Type":"application/json"}}),j=await d.json();d.ok||f(j.detail)},x=()=>{a.push("/login")},g=()=>{a.push("/signup")};return e.jsxs(y,{sx:{...C({color:E(m.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(k,{sx:{position:"fixed",top:{xs:10,md:20},left:{xs:10,md:20}}}),e.jsx(w,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(z,{sx:{p:5,width:1,maxWidth:520,overflowY:"auto",maxHeight:"80vh","&::-webkit-scrollbar":{display:"none"}},children:[e.jsx(r,{variant:"h4",children:"Email Verification"}),e.jsx(r,{variant:"body1",py:1,children:"A verification email has been sent. If you haven't received it, click the button below to resend it."}),e.jsx(T,{message:h}),e.jsx(L,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:p,disabled:n,children:"Resend Verification Email"}),n&&e.jsxs(r,{variant:"body2",children:["You can resend the email in ",i," seconds."]}),e.jsx(u,{fullWidth:!0,size:"large",variant:"outlined",color:"inherit",onClick:x,sx:{mt:2},children:"Login"}),e.jsx(u,{fullWidth:!0,size:"large",variant:"outlined",color:"inherit",onClick:g,sx:{mt:2},children:"Signup"})]})})]})}export{O as default};
